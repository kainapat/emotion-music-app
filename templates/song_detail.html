<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <script src="https://cdn.tailwindcss.com"></script>
  <title>{{ song.title }} - Emotion Path</title>
</head>
<body class="bg-gray-100 p-6">
  <div class="max-w-4xl mx-auto bg-white p-6 rounded-xl shadow">
    <h1 class="text-2xl font-bold mb-2">üéµ {{ song.title }}</h1>
    <p class="text-sm text-gray-500">
      üëÅ {{ song.views }} | üëç {{ song.likes }} | üìÖ {{ song.upload }}
    </p>

    <!-- ‡∏™‡∏£‡∏∏‡∏õ‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏° -->
    <div class="mt-4 p-4 rounded-lg border-2 {{ overall_emotion_color }}">
      <div class="flex items-center space-x-3">
        <span class="text-2xl">{{ overall_emotion_icon }}</span>
        <div>
          <h3 class="text-lg font-semibold">‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á</h3>
          <p class="text-sm opacity-75 mb-2">
            ‡πÄ‡∏û‡∏•‡∏á‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô <strong>{{ overall_emotion.upper() }}</strong>
          </p>
          <p class="text-xs opacity-90 leading-relaxed">
            {{ emotion_explanation }}
          </p>
        </div>
      </div>
    </div>

    <!-- ‡∏•‡∏¥‡∏á‡∏Å‡πå YouTube -->
    <div class="mt-4">
      <a href="{{ song.youtube }}" target="_blank" class="text-blue-500 underline">
        ‚ñ∂Ô∏è ‡πÄ‡∏õ‡∏¥‡∏î‡∏ö‡∏ô YouTube
      </a>
    </div>

    <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö‡πÄ‡∏û‡∏•‡∏á -->
    <form action="/song/{{ song.id }}/delete" method="post" onsubmit="return confirm('‚ùå ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÄ‡∏û‡∏•‡∏á‡∏ô‡∏µ‡πâ?');">
      <button type="submit"
              class="mt-4 bg-red-500 text-white px-4 py-2 rounded shadow hover:bg-red-600">
        üóëÔ∏è ‡∏•‡∏ö‡πÄ‡∏û‡∏•‡∏á‡∏ô‡∏µ‡πâ
      </button>
    </form>

    <!-- ‡∏Å‡∏£‡∏≤‡∏ü -->
    <div class="mt-6">
      <h2 class="text-lg font-semibold mb-2">üìà ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå</h2>
      {% if song.graph %}
        <div class="border rounded-lg p-4">
          {{ song.graph|safe }}
        </div>
      {% else %}
        <div class="p-4 border-2 border-dashed rounded-lg text-center text-gray-500">
          ‚ö†Ô∏è ‡πÄ‡∏û‡∏•‡∏á‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏£‡∏≤‡∏ü‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå
          <div class="mt-3">
            <a href="/song/{{ song.id }}/refresh"
               class="bg-gradient-to-r from-pink-500 to-purple-500 text-white px-4 py-2 rounded shadow hover:opacity-90">
              üîÑ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡πÉ‡∏´‡∏°‡πà
            </a>
          </div>
        </div>
      {% endif %}
    </div>

    <!-- Segment -->
    <div class="mt-6">
      <h2 class="text-lg font-semibold mb-2">üìù ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÄ‡∏û‡∏•‡∏á & ‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå</h2>
      <div class="space-y-3">
        {% for segment in segments %}
          <div class="p-4 rounded-lg border {{ segment.color_class }}">
            <div class="flex items-center space-x-2 mb-2">
              <span class="text-lg">{{ segment.icon }}</span>
              <span class="font-semibold text-sm uppercase">{{ segment.emotion }}</span>
            </div>
            <p class="text-sm leading-relaxed">{{ segment.text }}</p>
          </div>
        {% endfor %}
      </div>
    </div>

    <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö -->
    <div class="mt-6">
      <a href="/" class="text-blue-500 underline">‚¨ÖÔ∏è ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
    </div>
  </div>
</body>
</html>
